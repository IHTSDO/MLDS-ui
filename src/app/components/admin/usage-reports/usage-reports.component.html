<div class="row">
  <div class="col-lg-12">
    <div class="page-header">

      <h2>Review Usage Reports</h2>
    </div>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Affiliate Name</th>
            <th (click)="toggleField('submitted')">
              Date Submitted
              <span *ngIf="orderByField !== 'submitted'"><i class="fa fa-sort"></i></span>
              <span *ngIf="orderByField === 'submitted'">
                <span *ngIf="!reverseSort"><i class="fa fa-sort-asc"></i></span>
                <span *ngIf="reverseSort"><i class="fa fa-sort-desc"></i></span>
              </span>
            </th>
            <th (click)="toggleField('state')">
              Status
              <span *ngIf="orderByField !== 'state'"><i class="fa fa-sort"></i></span>
              <span *ngIf="orderByField === 'state'">
                <span *ngIf="!reverseSort"><i class="fa fa-sort-asc"></i></span>
                <span *ngIf="reverseSort"><i class="fa fa-sort-desc"></i></span>
              </span>
            </th>
            <th (click)="toggleField('type')">
              Type
              <span *ngIf="orderByField !== 'type'"><i class="fa fa-sort"></i></span>
              <span *ngIf="orderByField === 'type'">
                <span *ngIf="!reverseSort"><i class="fa fa-sort-asc"></i></span>
                <span *ngIf="reverseSort"><i class="fa fa-sort-desc"></i></span>
              </span>
            </th>
            <th>Implementation Status</th>
            <th (click)="toggleField('startDate')">
              Start Date
              <span *ngIf="orderByField !== 'startDate'"><i class="fa fa-sort"></i></span>
              <span *ngIf="orderByField === 'startDate'">
                <span *ngIf="!reverseSort"><i class="fa fa-sort-asc"></i></span>
                <span *ngIf="reverseSort"><i class="fa fa-sort-desc"></i></span>
              </span>
            </th>
            <th (click)="toggleField('endDate')">
              End Date
              <span *ngIf="orderByField !== 'endDate'"><i class="fa fa-sort"></i></span>
              <span *ngIf="orderByField === 'endDate'">
                <span *ngIf="!reverseSort"><i class="fa fa-sort-asc"></i></span>
                <span *ngIf="reverseSort"><i class="fa fa-sort-desc"></i></span>
              </span>
            </th>
            <th>Hospitals</th>
            <th>Practices</th>
            <th></th>
          </tr>
        </thead>
        <tbody infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="300" (scrolled)="loadMoreUsageReports()">
          <tr *ngFor="let usageReport of usageReports" (click)="goToReviewUsageReport(usageReport)">
            <td>{{usageReport.affiliate.affiliateDetails.firstName + ' ' + usageReport.affiliate.affiliateDetails.lastName}}</td>
            <td>{{usageReport.submitted | date: 'yyyy-MM-dd'}}</td>
            <td>{{usageReport.state}}</td>
            <td>{{usageReport.type}}</td>
            <td>{{usageReport.context?.implementationStatus}}</td>
            <td>{{usageReport.startDate}}</td>
            <td>{{usageReport.endDate}}</td>
            <td>{{usageReportHospitals(usageReport)}}</td>
            <td>{{usageReportPractices(usageReport)}}</td>
            <td>
            <button
                *ngIf="isAdmin"
                type="button"
                class="review-button"
                (click)="goToReviewUsageReport(usageReport)"
              >
              <i class="fa fa-pencil"></i>  Review
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- <div class="table-responsive" *ngIf="!isAdmin"> -->
      <!-- Code for non-admin users -->
    <!-- </div> -->
  <!-- </div> -->
</div>
