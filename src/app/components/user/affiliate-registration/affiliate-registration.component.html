<form [formGroup]="affiliateApplicationForm" (ngSubmit)="submit()">
    <div class="container">

        <div class="row space" *ngIf="approvalState === 'CHANGE_REQUESTED'">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <div class="alert alert-warning" role="alert">
                    <div><strong>{{'register.affiliateRegistration.changeRequestedWarning.title'|translate|compareText:'Affiliate Registration Needs Amendments'}}</strong></div>
                    <p>{{'register.affiliateRegistration.changeRequestedWarning.text'|translate|compareText:'Your affiliate  registration needs to be updated before it can processed. Please see email regarding the necessary changes to complete your registration.'}}</p>
                </div>
            </div>
        </div>

        <h1>{{'register.affiliateRegistration.title'|translate  |compareText:'Affiliate Registration'}}</h1>

        <div>
            <div class="col-sx-12 col-md-12">

                <div>
                    <div class="panel panel-default applicant">

                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <span> {{'register.affiliateRegistration.usageType'|translate|compareText:'Usage Type'}}</span>
                            </h4>
                        </div>

                        <div class="panel-collapse collapse show">
                            <div class="panel-body">
                                <h4>{{'register.affiliateRegistration.conditions'|translate|compareText:'Please select the conditions that the product will be used under'}}:</h4>

                                <!-- for usage type -->
                                <div class="form-group">

                                    <label for="usageType">{{'register.affiliateRegistration.usageType'|translate|compareText:'Usage Type'}}:<span class="text-danger">*</span></label>
                                    <select formControlName="type" class="form-select input-md" (change)="onAffiliateTypeUpdated($event)">
                                        <option value="COMMERCIAL">{{ 'affiliate.types.extended.COMMERCIAL' | translate }}</option>
                                        <option value="ACADEMIC">{{ 'affiliate.types.extended.ACADEMIC' | translate }}</option>
                                        <option value="OTHER">{{ 'affiliate.types.extended.OTHER' | translate }}</option>
                                        <option value="INDIVIDUAL">{{ 'affiliate.types.extended.INDIVIDUAL' | translate }}</option>
                                    </select>

                                    <p *ngIf="(affiliateApplicationForm?.get('type')?.hasError('required') && (affiliateApplicationForm?.get('type')?.touched || submitAttempted))"
                                        class="help-block">
                                        {{'register.messages.validate.registration.usagetyperequired'|translate|compareText:'Usage type field is required.'}}
                                    </p>
                                </div>

                                <!-- for subtype -->
                                <div class="form-group"
                                    *ngIf="affiliateApplicationForm?.get('type')?.value && affiliateApplicationForm?.get('type')?.value !== 'OTHER'">
                                    <label for="subType"
                                        >{{'views.contactInfo.admin.subtype.name'|translate|compareText:'Subtype'}}:<span class="text-danger">*</span></label>
                                    <select formControlName="subType" class="form-select input-md"
                                        (blur)="autoSubmit()">
                                        <option value="" disabled selected>Select a subtype</option>
                                        <option *ngIf="affiliateApplicationForm?.get('type')?.value === 'COMMERCIAL'"
                                            value="DEVELOPER">{{'affiliate.subType.DEVELOPER'|translate|compareText:'Developer'}}</option>
                                        <option *ngIf="affiliateApplicationForm?.get('type')?.value === 'ACADEMIC'"
                                            value="DEVELOPMENT">{{'affiliate.subType.DEVELOPMENT'|translate|compareText:'Development'}}</option>
                                        <option *ngIf="affiliateApplicationForm?.get('type')?.value !== 'COMMERCIAL'"
                                            value="EDUCATIONAL">{{'affiliate.subType.EDUCATIONAL'|translate|compareText:'Educational'}}</option>
                                        <option *ngIf="affiliateApplicationForm?.get('type')?.value === 'ACADEMIC'"
                                            value="HEALTHCAREPROVIDER">{{'affiliate.subType.HEALTHCAREPROVIDER'|translate|compareText:'Healthcare Provider'}}</option>
                                        <option *ngIf="affiliateApplicationForm?.get('type')?.value === 'INDIVIDUAL'"
                                            value="PERSONAL">{{'affiliate.subType.PERSONAL'|translate|compareText:'Personal'}}</option>
                                        <option *ngIf="affiliateApplicationForm?.get('type')?.value !== 'COMMERCIAL'"
                                            value="RESEARCH">{{'affiliate.subType.RESEARCH'|translate|compareText:'Research'}}</option>
                                        <option *ngIf="affiliateApplicationForm?.get('type')?.value === 'COMMERCIAL'"
                                            value="VENDOR">{{'affiliate.subType.VENDOR'|translate|compareText:'Vendor'}}</option>
                                    </select>

                                    <p *ngIf="affiliateApplicationForm?.get('subType')?.hasError('required') && (affiliateApplicationForm?.get('subType')?.touched || submitAttempted)"
                                        class="help-block">
                                        {{'register.messages.validate.registration.subtyperequired' | translate}}
                                    </p>
                                </div>

                                <!-- other type text -->
                                <div class="form-group"
                                    *ngIf="affiliateApplicationForm?.get('type')?.value === 'OTHER'">
                                    <label for="other">{{'views.contactInfo.admin.other.name'|translate|compareText:'Other'}}:<span class="text-danger">*</span></label>
                                    <input type="text" formControlName="otherText" class="form-control"
                                        (blur)="autoSubmit()">


                                    <div
                                        *ngIf="(affiliateApplicationForm?.get('otherText')?.touched || submitAttempted)">
                                        <p *ngIf="affiliateApplicationForm?.get('otherText')?.hasError('required')"
                                            class="help-block">
                                            {{'register.affiliateRegistration.validation.other.required' | translate}}
                                        </p>
                                        <p *ngIf="affiliateApplicationForm?.get('otherText')?.hasError('maxlength')"
                                            class="help-block">
                                            {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                        </p>
                                    </div>

                                </div>

                                <!-- agreement type -->
                                <div *ngIf="!billingHide" class="form-group">
                                    <label for="agreementType">{{'register.affiliateRegistration.typeOfAgreement'|translate|compareText:'Type of Agreement'}}:<span class="text-danger">*</span></label>
                                    <select formControlName="agreementType" class="form-select" (blur)="autoSubmit()">
                                        <option *ngFor="let type of agreementTypeOptions" [value]="type">{{ 'affiliate.agreementType.'+type|translate }}
                                        </option>
                                    </select>

                                    <div
                                        *ngIf="(affiliateApplicationForm?.get('agreementType')?.touched || submitAttempted)">
                                        <p *ngIf="affiliateApplicationForm?.get('agreementType')?.hasError('required')"
                                            class="help-block">
                                            {{'form.requiredField'|translate|compareText:'Required field.'}}
                                        </p>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default" *ngIf="affiliateApplicationForm?.get('type')?.value">

                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <span>{{'views.contactInfo.contact.title'|translate|compareText:'Contact Information'}}</span>&nbsp;
                                <small *ngIf="affiliateApplicationForm?.get('type')?.value === 'INDIVIDUAL'">Member:
                                    {{'global.member.'+applicationData?.affiliateDetails?.address?.country?.member?.key|translate}}</small>
                            </h4>
                        </div>

                        <div class="panel-collapse collapse show">
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><label for="name"
                                               >{{'views.contactInfo.contact.fullName'|translate|compareText:'Name'}}:</label>
                                            {{applicationData.affiliateDetails.firstName + ' ' +
                                            applicationData.affiliateDetails.lastName}}</p>
                                        <p><label for="email"
                                                >{{'views.contactInfo.contact.email.name'|translate|compareText:'Email'}}:</label>
                                            {{applicationData.affiliateDetails.email}}</p>
                                    </div>
                                </div>

                                <!-- alternate email -->
                                <div class="row" *ngIf="affiliateApplicationForm?.get('type')?.value === 'INDIVIDUAL'">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="alternateEmail"
                                                >{{'views.contactInfo.contact.alternateEmail.name'|translate|compareText:'Alternate Email'}}:<span class="text-danger">*</span></label>
                                            <input class="form-control" type="email" formControlName="alternateEmail"
                                                (blur)="autoSubmit()" />

                                            <div
                                                *ngIf="affiliateApplicationForm?.get('alternateEmail')?.touched || submitAttempted">
                                                <p *ngIf="affiliateApplicationForm?.get('alternateEmail')?.hasError('required')"
                                                    class="help-block">
                                                    {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                </p>
                                                <p *ngIf="!affiliateApplicationForm?.get('alternateEmail')?.hasError('required') && affiliateApplicationForm?.get('alternateEmail')?.hasError('email')"
                                                    class="help-block"
                                                    >
                                                    {{'views.contactInfo.contact.email.invalid'|translate|compareText:'Invalid Email Address.'}}
                                                </p>
                                                <p *ngIf="!affiliateApplicationForm?.get('alternateEmail')?.hasError('required') && affiliateApplicationForm?.get('alternateEmail')?.hasError('notUnique')"
                                                    class="help-block"
                                                    >
                                                    {{'views.contactInfo.contact.email.invalid'|translate|compareText:'Email Addresses needs to be unique.'}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- third email -->
                                <div class="row" *ngIf="affiliateApplicationForm?.get('type')?.value === 'INDIVIDUAL'">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="thirdEmail"
                                                >{{'views.contactInfo.contact.thirdEmail'|translate|compareText:'Third Email'}}:</label>

                                            <input class="form-control" type="email" formControlName="thirdEmail"
                                                (blur)="autoSubmit()" />
                                            <div
                                                *ngIf="affiliateApplicationForm?.get('thirdEmail')?.touched || submitAttempted">
                                                <p *ngIf="affiliateApplicationForm?.get('thirdEmail')?.hasError('required')"
                                                    class="help-block">
                                                    {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                </p>
                                                <p *ngIf="!affiliateApplicationForm?.get('thirdEmail')?.hasError('required') && affiliateApplicationForm?.get('thirdEmail')?.hasError('email')"
                                                    class="help-block"
                                                    >
                                                    {{'views.contactInfo.contact.email.invalid'|translate|compareText:'Invalid Email Address.'}}
                                                </p>
                                                <p *ngIf="!affiliateApplicationForm?.get('thirdEmail')?.hasError('required') && affiliateApplicationForm?.get('thirdEmail')?.hasError('notUnique')"
                                                    class="help-block"
                                                    >
                                                    {{'views.contactInfo.contact.email.invalid'|translate|compareText:'Email Addresses needs to be unique.'}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <label for="landline"
                                            >{{'views.contactInfo.contact.landline.name'|translate|compareText:'Landline Phone Number'}}:<span class="text-danger">*</span></label>
                                    </div>
                                    <div class="col-md-2">
                                        <label for="extension"
                                            >{{'views.contactInfo.contact.landlineExtension.name'|translate|compareText:'Extension'}}:</label>
                                    </div>
                                </div>

                                <!-- landline -->
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                     <ngx-intl-tel-input
                                            [cssClass]="'form-control phone-input'"
                                            [enableAutoCountrySelect]="true"
                                            [enablePlaceholder]="true"
                                            [maxLength]="15"
                                            [phoneValidation]="false"
                                            name="contactPhone"
                                            formControlName="contactPhone"
                                            (countryChange)="onCountryChange($event)"
                                        ></ngx-intl-tel-input>                       
                                            
                                        </div>
                                        <div
                                            *ngIf="affiliateApplicationForm?.get('contactPhone')?.touched || submitAttempted">
                                            <p *ngIf="affiliateApplicationForm.get('contactPhone')?.hasError('required')"
                                                class="help-block">
                                                {{'form.requiredField'|translate|compareText:'Required field.'}}
                                            </p>
                                            <p *ngIf="!affiliateApplicationForm.get('contactPhone')?.hasError('required') && affiliateApplicationForm.get('contactPhone')?.hasError('maxLength')"
                                                class="help-block">
                                                {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                            </p>
                                            <p *ngIf="!affiliateApplicationForm.get('contactPhone')?.hasError('required') && affiliateApplicationForm.get('contactPhone')?.hasError('phoneNumberInvalid')"
                                                class="help-block">
                                                {{'views.contactInfo.contact.landline.invalid'|translate|compareText:'Invalid Phone Number.'}}
                                            </p>
                                        </div>
                                    </div>

                                    <!-- extension -->
                                    <div class="col-md-2" style="margin-top: 3px;">
                                        <div class="form-group">
                                            <input class="form-control col-md-2" formControlName="contactExtension"
                                                (blur)="autoSubmit()" />
                                            <p *ngIf="affiliateApplicationForm.get('contactExtension')?.hasError('maxLength')"
                                                class="help-block">
                                                {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <label for="mobile"
                                            >{{'views.contactInfo.contact.mobile.name'|translate|compareText:'Mobile Phone Number'}}:<span *ngIf="affiliateApplicationForm?.get('type')?.value !== 'INDIVIDUAL'" class="text-danger">*</span>                                      </label>
                                    </div>
                                </div>

                                <!-- mobile number -->
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">

                                        <ngx-intl-tel-input
                                            [cssClass]="'form-control phone-input'"
                                            [enableAutoCountrySelect]="true"
                                            [enablePlaceholder]="true"
                                            [maxLength]="15"
                                            [phoneValidation]="false"
                                            name="mobilePhone"
                                            formControlName="mobilePhone"
                                            (countryChange)="onCountryChangeM($event)"
                                        ></ngx-intl-tel-input>    
                                          
                                        </div>
                                        <div
                                            *ngIf="affiliateApplicationForm?.get('mobilePhone')?.touched || submitAttempted">
                                            <p *ngIf="affiliateApplicationForm.get('mobilePhone')?.hasError('required')"
                                                class="help-block">
                                                {{'form.requiredField'|translate|compareText:'Required field.'}}
                                            </p>
                                            <p *ngIf="!affiliateApplicationForm.get('mobilePhone')?.hasError('required') && affiliateApplicationForm.get('mobilePhone')?.hasError('maxLength')"
                                                class="help-block">
                                                {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                            </p>
                                            <p *ngIf="!affiliateApplicationForm.get('mobilePhone')?.hasError('required') && affiliateApplicationForm.get('mobilePhone')?.hasError('phoneNumberInvalid')"
                                                class="help-block">
                                                {{'views.contactInfo.contact.landline.invalid'|translate|compareText:'Invalid Phone Number.'}}
                                            </p>
                                        </div>
                                    </div>
                                </div>


                                <!-- address -->
                                <div *ngIf="affiliateApplicationForm?.get('type')?.value === 'INDIVIDUAL'">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="address"
                                                    >{{'views.contactInfo.contact.address.name'|translate|compareText:'Address'}}:<span class="text-danger">*</span></label>
                                                <input class="form-control" formControlName="address"
                                                    placeholder="{{ 'views.contactInfo.contact.address.placeholder' | translate}}"
                                                    (change)="copyAddress()" (blur)="autoSubmit()" />

                                                <div
                                                    *ngIf="affiliateApplicationForm.get('address')?.touched || submitAttempted">
                                                    <p *ngIf="affiliateApplicationForm.get('address')?.hasError('required')"
                                                        class="help-block">
                                                        {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                    </p>
                                                    <p *ngIf="!affiliateApplicationForm.get('address')?.hasError('required') && affiliateApplicationForm.get('address')?.hasError('maxLength')"
                                                        class="help-block">
                                                        {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <label for="city"
                                                >{{'views.contactInfo.contact.city.name'|translate|compareText:'City'}}:<span class="text-danger">*</span></label>
                                        </div>
                                        <div class="col-md-3">
                                            <label for="postCode"
                                                >{{'views.contactInfo.contact.postcode.name'|translate|compareText:'Post Code'}}:<span class="text-danger">*</span></label>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-3">

                                            <!-- city -->
                                            <div class="form-group">
                                                <input class="form-control" formControlName="city"
                                                    placeholder="{{ 'views.contactInfo.contact.city.placeholder'|translate}}"
                                                    (change)="copyAddress()" (blur)="autoSubmit()" />

                                                <div
                                                    *ngIf="affiliateApplicationForm.get('city')?.touched || submitAttempted">
                                                    <p *ngIf="affiliateApplicationForm.get('city')?.hasError('required')"
                                                        class="help-block">
                                                        {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                    </p>
                                                    <p *ngIf="!affiliateApplicationForm.get('city')?.hasError('required') && affiliateApplicationForm.get('city')?.hasError('maxlength')"
                                                        class="help-block">
                                                        {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                                    </p>
                                                </div>

                                            </div>
                                        </div>

                                        <!-- postal code -->
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <input class="form-control" type="text" formControlName="postalCode"
                                                    placeholder="{{ 'views.contactInfo.contact.postcode.placeholder'|translate}}"
                                                    (change)="copyAddress()" (blur)="autoSubmit()" />

                                                <div
                                                    *ngIf="affiliateApplicationForm.get('postalCode')?.touched || submitAttempted">
                                                    <p *ngIf="affiliateApplicationForm.get('postalCode')?.hasError('required')"
                                                        class="help-block">
                                                        {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                    </p>
                                                    <p *ngIf="!affiliateApplicationForm.get('postalCode')?.hasError('required') && affiliateApplicationForm.get('postalCode')?.hasError('maxlength')"
                                                        class="help-block">
                                                        {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                                    </p>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="country"
                                                    >{{'views.contactInfo.contact.country.name'|translate|compareText:'Country'}}:</label><span>
                                                    {{applicationData.affiliateDetails.address.country.commonName}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <!-- start billing -->

                                    <div *ngIf="!billingHide">

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="isSameAddress"
                                                        >{{'views.contactInfo.contact.billingAddress.sameAsAddress'|translate|compareText:'Use Address as Billing Address'}}</label>&nbsp;&nbsp;
                                                    <input name="use" type="checkbox" formControlName="isSameAddress"
                                                        (change)="copyAddress()" />
                                                </div>
                                            </div>
                                        </div>


                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="billingAddress"
                                                        >{{'views.contactInfo.contact.billingAddress.name'|translate|compareText:'Billing Address'}}:<span class="text-danger">*</span></label>
                                                    <input class="form-control" formControlName="billingAddress"
                                                        placeholder="{{ 'views.contactInfo.contact.address.placeholder' |translate}}"
                                                        (blur)="autoSubmit()" />
                                                    <div
                                                        *ngIf="(affiliateApplicationForm.get('billingAddress')?.touched || submitAttempted) && affiliateApplicationForm.get('billingAddress')?.errors">
                                                        <p *ngIf="affiliateApplicationForm.get('billingAddress')?.hasError('required')"
                                                            class="help-block">
                                                            {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                        </p>
                                                        <p *ngIf="affiliateApplicationForm.get('billingAddress')?.hasError('maxlength')"
                                                            class="help-block">
                                                            {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-3">
                                                <label for="city"
                                                   >{{'views.contactInfo.contact.city.name'|translate|compareText:'City'}}:<span class="text-danger">*</span></label>
                                            </div>
                                            <div class="col-md-3">
                                                <label for="postCode"
                                                    >{{'views.contactInfo.contact.postcode.name'|translate|compareText:'Post Code'}}:<span class="text-danger">*</span></label>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <input class="form-control" formControlName="billingCity"
                                                        placeholder="{{ 'views.contactInfo.contact.city.placeholder' |translate}}"
                                                        (blur)="autoSubmit()" />
                                                    <div
                                                        *ngIf="(affiliateApplicationForm.get('billingCity')?.touched || submitAttempted) && affiliateApplicationForm.get('billingCity')?.errors">
                                                        <p *ngIf="affiliateApplicationForm.get('billingCity')?.hasError('required')"
                                                            class="help-block">
                                                            {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                        </p>
                                                        <p *ngIf="affiliateApplicationForm.get('billingCity')?.hasError('maxlength')"
                                                            class="help-block">
                                                            {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                                        </p>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <input class="form-control" formControlName="billingPostCode"
                                                        placeholder="{{ 'views.contactInfo.contact.postcode.placeholder' |translate}}"
                                                        (blur)="autoSubmit()" />

                                                    <div
                                                        *ngIf="(affiliateApplicationForm.get('billingPostCode')?.touched || submitAttempted) && affiliateApplicationForm.get('billingPostCode')?.errors">
                                                        <p *ngIf="affiliateApplicationForm.get('billingPostCode')?.hasError('required')"
                                                            class="help-block">
                                                            {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                        </p>
                                                        <p *ngIf="affiliateApplicationForm.get('billingPostCode')?.hasError('maxlength')"
                                                            class="help-block">
                                                            {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                                        </p>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                        <div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label
                                                        >{{'views.contactInfo.contact.country.name'|translate|compareText:'Country'}}:<span class="text-danger">*</span></label>
                                                    <input class="form-control" type="text" placeholder="{{ 'views.contactInfo.contact.country.placeholder' | translate }}"
                                                        formControlName="billingCountry" [ngbTypeahead]="search"
                                                        [resultFormatter]="formatCountry"
                                                        [inputFormatter]="formatCountry" autocomplete="off"
                                                        aria-autocomplete="list" aria-expanded="false" />
                                                </div>
                                                <div
                                                    *ngIf="(affiliateApplicationForm.get('billingCountry')?.touched || submitAttempted) && affiliateApplicationForm.get('billingCountry')?.errors">
                                                    <p *ngIf="affiliateApplicationForm.get('billingCountry')?.hasError('required')"
                                                        class="help-block">
                                                        {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                    </p>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default"
                        *ngIf="affiliateApplicationForm?.get('type')?.value && affiliateApplicationForm?.get('type')?.value != 'INDIVIDUAL'">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <span >{{'views.contactInfo.organization.title'|translate|compareText:'Organization'}}</span>&nbsp;
                                <small>Member: {{'global.member.'+applicationData.affiliateDetails.address.country.member.key|translate}}</small>
                            </h4>
                        </div>

                        <div class="panel-collapse collapse show">
                            <div class="panel-body">

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="organizationName"
                                                >{{'views.contactInfo.organization.name.name'|translate|compareText:'Organization Name'}}:<span class="text-danger">*</span></label>
                                            <input class="form-control" formControlName="organizationName"
                                                placeholder="{{'views.contactInfo.organization.name.placeholder'|translate}}"
                                                (blur)="autoSubmit()" />
                                            <div
                                                *ngIf="(affiliateApplicationForm.get('organizationName')?.touched || submitAttempted) && affiliateApplicationForm.get('organizationName')?.errors">
                                                <p *ngIf="affiliateApplicationForm.get('organizationName')?.hasError('required')"
                                                    class="help-block">
                                                    {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                </p>
                                                <p *ngIf="affiliateApplicationForm.get('organizationName')?.hasError('maxlength')"
                                                    class="help-block">
                                                    {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="organizationType"
                                                >{{'views.contactInfo.organization.type.name'|translate|compareText:'Organization Type'}}:<span class="text-danger">*</span></label>
                                            <select formControlName="organizationType" class="form-select">
                                                <option *ngFor="let type of organizationTypes" [value]="type"
                                                    (blur)="autoSubmit()">{{ 'affiliate.organizationType.'+ type|translate }}
                                                </option>
                                            </select>
                                        </div>
                                        <div
                                            *ngIf="(affiliateApplicationForm.get('organizationType')?.touched || submitAttempted) && affiliateApplicationForm.get('organizationType')?.errors">
                                            <p *ngIf="affiliateApplicationForm.get('organizationType')?.hasError('required')"
                                                class="help-block">
                                                {{'form.requiredField'|translate|compareText:'Required field.'}}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div class="row"
                                    *ngIf="affiliateApplicationForm?.get('organizationType')?.value === 'OTHER'">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <input class="form-control" formControlName="organizationTypeOther"
                                                placeholder="{{ 'views.contactInfo.organization.type.placeholder' |translate}}"
                                                (blur)="autoSubmit()" />
                                        </div>
                                        <div
                                            *ngIf="(affiliateApplicationForm.get('organizationTypeOther')?.touched || submitAttempted) && affiliateApplicationForm.get('organizationTypeOther')?.errors">
                                            <p *ngIf="affiliateApplicationForm.get('organizationTypeOther')?.hasError('required')"
                                                class="help-block">
                                                {{'form.requiredField'|translate|compareText:'Required field.'}}
                                            </p>
                                            <p *ngIf="affiliateApplicationForm.get('organizationTypeOther')?.hasError('maxlength')"
                                                class="help-block">
                                                {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                            </p>
                                        </div>

                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="address"
                                                >{{'views.contactInfo.contact.address.name'|translate|compareText:'Address'}}:<span class="text-danger">*</span></label>
                                            <input class="form-control" formControlName="address"
                                                placeholder="{{ 'views.contactInfo.contact.address.placeholder'|translate}}"
                                                (change)="copyAddress()" (blur)="autoSubmit()">

                                            <div
                                                *ngIf="(affiliateApplicationForm.get('address')?.touched || submitAttempted) && affiliateApplicationForm.get('address')?.errors">
                                                <p *ngIf="affiliateApplicationForm.get('address')?.hasError('required')"
                                                    class="help-block">
                                                    {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                </p>
                                                <p *ngIf="affiliateApplicationForm.get('address')?.hasError('maxlength')"
                                                    class="help-block">
                                                    {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-3">
                                        <label for="city"
                                            >{{'views.contactInfo.contact.city.name'|translate|compareText:'City'}}:<span class="text-danger">*</span></label>
                                    </div>
                                    <div class="col-md-3">
                                        <label for="postCode"
                                            >{{'views.contactInfo.contact.postcode.name'|translate|compareText:'Post Code'}}:<span class="text-danger">*</span></label>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <input class="form-control" formControlName="city"
                                                placeholder="{{ 'views.contactInfo.contact.city.placeholder'|translate }}"
                                                (change)="copyAddress()" (blur)="autoSubmit()">
                                        </div>

                                        <div
                                            *ngIf="(affiliateApplicationForm.get('city')?.touched || submitAttempted) && affiliateApplicationForm.get('city')?.errors">
                                            <p *ngIf="affiliateApplicationForm.get('city')?.hasError('required')"
                                                class="help-block">
                                                {{'form.requiredField'|translate|compareText:'Required field.'}}
                                            </p>
                                            <p *ngIf="affiliateApplicationForm.get('city')?.hasError('maxlength')"
                                                class="help-block">
                                                {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                            </p>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <input class="form-control" type="text" formControlName="postalCode"
                                                placeholder="{{ 'views.contactInfo.contact.postcode.placeholder' |translate}}"
                                                (change)="copyAddress()" (blur)="autoSubmit()">
                                        </div>

                                        <div
                                            *ngIf="(affiliateApplicationForm.get('postalCode')?.touched || submitAttempted) && affiliateApplicationForm.get('postalCode')?.errors">
                                            <p *ngIf="affiliateApplicationForm.get('postalCode')?.hasError('required')"
                                                class="help-block">
                                                {{'form.requiredField'|translate|compareText:'Required field.'}}
                                            </p>
                                            <p *ngIf="affiliateApplicationForm.get('postalCode')?.hasError('maxlength')"
                                                class="help-block">
                                                {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="country"
                                                >{{'views.contactInfo.contact.country.name'|translate|compareText:'Country'}}:</label><span>
                                                {{applicationData.affiliateDetails.address.country.commonName}}</span>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <!-- start billing -->
                                <div *ngIf="!billingHide">

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="useOrganizationAddress"
                                                    >{{'views.contactInfo.contact.billingAddress.useOrganizationAddress'|translate|compareText:'Use Organization Address as Billing Address'}}</label>&nbsp;<input
                                                    name="use" type="checkbox" formControlName="isSameAddress"
                                                    (change)="copyAddress()">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="billingAddress"
                                                    >{{'views.contactInfo.contact.billingAddress.name'|translate|compareText:'Billing Address'}}:<span class="text-danger">*</span></label>
                                                <input class="form-control" formControlName="billingAddress"
                                                    placeholder="{{ 'views.contactInfo.contact.address.placeholder'|translate}}"
                                                    (blur)="autoSubmit()" />

                                            </div>
                                            <div
                                                *ngIf="(affiliateApplicationForm.get('billingAddress')?.touched || submitAttempted) && affiliateApplicationForm.get('billingAddress')?.errors">
                                                <p *ngIf="affiliateApplicationForm.get('billingAddress')?.hasError('required')"
                                                    class="help-block">
                                                    {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                </p>
                                                <p *ngIf="affiliateApplicationForm.get('billingAddress')?.hasError('maxlength')"
                                                    class="help-block">
                                                    {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-3">
                                            <label for="city"
                                                >{{'views.contactInfo.contact.city.name'|translate|compareText:'City'}}:<span class="text-danger">*</span></label>
                                        </div>
                                        <div class="col-md-3">
                                            <label for="postCode"
                                                >{{'views.contactInfo.contact.postcode.name'|translate|compareText:'Post Code'}}:<span class="text-danger">*</span></label>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <input class="form-control" formControlName="billingCity"
                                                    placeholder="{{ 'views.contactInfo.contact.city.placeholder' |translate}}"
                                                    (blur)="autoSubmit()" />
                                            </div>
                                            <div
                                                *ngIf="(affiliateApplicationForm.get('billingCity')?.touched || submitAttempted) && affiliateApplicationForm.get('billingCity')?.errors">
                                                <p *ngIf="affiliateApplicationForm.get('billingCity')?.hasError('required')"
                                                    class="help-block">
                                                    {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                </p>
                                                <p *ngIf="affiliateApplicationForm.get('billingCity')?.hasError('maxlength')"
                                                    class="help-block">
                                                    {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                                </p>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <input class="form-control" formControlName="billingPostCode"
                                                    placeholder="{{ 'views.contactInfo.contact.postcode.placeholder' | translate }}"
                                                    (blur)="autoSubmit()" />
                                            </div>

                                            <div
                                                *ngIf="(affiliateApplicationForm.get('billingPostCode')?.touched || submitAttempted) && affiliateApplicationForm.get('billingPostCode')?.errors">
                                                <p *ngIf="affiliateApplicationForm.get('billingPostCode')?.hasError('required')"
                                                    class="help-block">
                                                    {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                </p>
                                                <p *ngIf="affiliateApplicationForm.get('billingPostCode')?.hasError('maxlength')"
                                                    class="help-block">
                                                    {{'form.tooLong'|translate|compareText:'Input value is too long.'}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="country"
                                                    >{{'views.contactInfo.contact.country.name'|translate|compareText:'Country'}}:<span class="text-danger">*</span></label>
                                                <input class="form-control" type="text" placeholder="{{ 'views.contactInfo.contact.country.placeholder' | translate }}"
                                                    formControlName="billingCountry" [ngbTypeahead]="search"
                                                    [resultFormatter]="formatCountry" [inputFormatter]="formatCountry"
                                                    autocomplete="off" aria-autocomplete="list" aria-expanded="false" />
                                            </div>
                                            <div
                                                *ngIf="(affiliateApplicationForm.get('billingCountry')?.touched || submitAttempted) && affiliateApplicationForm.get('billingCountry')?.errors">
                                                <p *ngIf="affiliateApplicationForm.get('billingCountry')?.hasError('required')"
                                                    class="help-block">
                                                    {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="alternateEmail"
                                                >{{'views.contactInfo.contact.alternateEmail.name'|translate|compareText:'Alternate Email'}}:<span class="text-danger">*</span></label>
                                            <input class="form-control" type="email"
                                                placeholder="{{ 'views.contactInfo.contact.email.placeholder' | translate}}"
                                                formControlName="alternateEmail" (blur)="autoSubmit()" />

                                            <div
                                                *ngIf="(affiliateApplicationForm?.get('alternateEmail')?.touched || submitAttempted) && affiliateApplicationForm?.get('alternateEmail')?.errors">
                                                <p *ngIf="affiliateApplicationForm?.get('alternateEmail')?.hasError('required')"
                                                    class="help-block">
                                                    {{'form.requiredField'|translate}}
                                                </p>
                                                <p *ngIf="!affiliateApplicationForm?.get('alternateEmail')?.hasError('required') && affiliateApplicationForm?.get('alternateEmail')?.hasError('email')"
                                                    class="help-block"
                                                    >
                                                    {{'views.contactInfo.contact.email.invalid'|translate|compareText:'Invalid Email Address.'}}
                                                </p>
                                                <p *ngIf="!affiliateApplicationForm?.get('alternateEmail')?.hasError('required') && affiliateApplicationForm?.get('alternateEmail')?.hasError('notUnique')"
                                                    class="help-block"
                                                    >
                                                    {{'views.contactInfo.contact.email.invalid'|translate|compareText:'Email Addresses need to be unique.'}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="thirdEmail"
                                                >{{'views.contactInfo.contact.thirdEmail'|translate|compareText:'Third Email'}}:<span class="text-danger">*</span></label>
                                            <input class="form-control" type="email"
                                                placeholder="{{ 'views.contactInfo.contact.email.placeholder' |translate}}"
                                                formControlName="thirdEmail" (blur)="autoSubmit()" />

                                            <div
                                                *ngIf="(affiliateApplicationForm?.get('thirdEmail')?.touched || submitAttempted) && affiliateApplicationForm?.get('thirdEmail')?.errors">
                                                <p *ngIf="affiliateApplicationForm?.get('thirdEmail')?.hasError('required')"
                                                    class="help-block">
                                                    {{'form.requiredField'|translate|compareText:'Required field.'}}
                                                </p>
                                                <p *ngIf="!affiliateApplicationForm?.get('thirdEmail')?.hasError('required') && affiliateApplicationForm?.get('thirdEmail')?.hasError('email')"
                                                    class="help-block">
                                                    {{'views.contactInfo.contact.email.invalid'|translate|compareText:'Invalid Email Address.'}}
                                                </p>
                                                <p *ngIf="!affiliateApplicationForm?.get('thirdEmail')?.hasError('required') && affiliateApplicationForm?.get('thirdEmail')?.hasError('notUnique')"
                                                    class="help-block">
                                                    {{'views.contactInfo.contact.email.invalid'|translate|compareText:'Email Addresses need to be unique.'}}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row" *ngIf="affiliateApplicationForm?.get('type')?.value == 'OTHER'">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="other" >{{'affiliate.type.OTHER'|translate|compareText:'Other'}}</label>
                                            <textarea class="form-control" rows="4" formControlName="otherTextArea"
                                                (blur)="autoSubmit()"></textarea>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="affiliateApplicationForm?.get('type')?.value" >
                    <app-embeddable-usage-log [commercialUsageReport]="commercialUsageReport"
                        [usageLogCanSubmit]="false"></app-embeddable-usage-log>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title" >
                            {{'register.affiliateRegistration.license.title'|translate|compareText:'SNOMED CT Agreement'}}
                        </h3>
                    </div>
                    <div class="panel-body">
                        <p>
                            <a target="_blank" class="btn btn-default btn-block"
                                 (click)="viewLicense()">{{'register.affiliateRegistration.license'|translate|compareText:'SNOMED License'}}</a>
                        </p>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" formControlName="snoMedTC" />&nbsp;
                                <span>
                                    <b>{{'register.affiliateRegistration.license.confirm'|translate|compareText:'I agree to the license'}}</b>
                                </span>
                            </label>

                            <div class="help-block"
                                *ngIf="submitAttempted && affiliateApplicationForm.get('snoMedTC')?.invalid">
                                {{'register.affiliateRegistration.license.error' | translate}}
                            </div>
                        </div>
                        <div class="panel-footer">
                            <button type="button" class="btn btn-success" (click)="submit()">{{'register.form.button'|translate|compareText:'Start Registration'}}</button>
                            <div class="has-error" *ngIf="submitAttempted && !affiliateApplicationForm.valid">
                                <p class="help-block">{{'form.pleaseFix'|translate|compareText:'Please fix the errors listed above.'}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>