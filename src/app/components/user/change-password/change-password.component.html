<div class="row new">
  <div class="col-sm-12 col-md-12 col-lg-12">
    <div class="page-header">
      <h1>{{'global.menu.affiliate.changePassword' | translate |compareText:'Change Password'}}</h1>
    </div>
  </div>
</div>
<div class="row">
  <div class="container">
    <div class="col-md-6">
      <!-- Show success message if form is disabled -->
      <div *ngIf="success && formDisabled" class="alerts">
        {{'password.messages.success' | translate}}
        <!-- <strong>Password changed!</strong>  Continue to <a href='#/contactInfo'>Account Information</a> -->
      </div>

      <!-- Show error message if there is an error -->
      <div *ngIf="error" class="alert alert-danger">
        {{'password.messages.error' | translate}}
        <!-- <strong>Password change failed!</strong> -->
      </div>

      <!-- Show mismatch message if passwords do not match -->
      <div *ngIf="doNotMatch && !formDisabled" class="alert alert-danger">
        {{'global.messages.error.dontmatch'|translate}}
        <!-- <strong>The password and its confirmation do not match!</strong> -->
      </div>

      <!-- Show the form only if not disabled -->
      <div *ngIf="!formDisabled">
        <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
          <div class="form-group">
            <label for="password">{{'global.form.newpassword' | translate | compareText:'New password'}}</label>
            <input type="password" id="password" class="form-control" style="border-color: #f26c4f;" formControlName="password" placeholder="{{'global.form.newpassword.placeholder' | translate}}">
            <div *ngIf="passwordForm.get('password')?.invalid && passwordForm.get('password')?.touched">
              <div class="help-block" *ngIf="passwordForm.get('password')?.errors?.['required']">
                {{'global.messages.validate.newpassword.required' |translate | compareText:'Your password is required.'}}
              </div>
              <div class="help-block" *ngIf="passwordForm.get('password')?.errors?.['minlength']">
                {{'global.messages.validate.newpassword.minlength' |translate | compareText:'Your password must be at least 5 characters.'}}
              </div>
              <div class="help-block" *ngIf="passwordForm.get('password')?.errors?.['maxlength']">
                {{'global.messages.validate.newpassword.maxlength'|translate | compareText:'Your password cannot be longer than 50 characters.'}}
              </div>
            </div>
          </div>

          <div id="strength">
              <small>Password strength:</small>
            <app-password-strength-bar [passwordToCheck]="passwordForm.get('password')?.value"></app-password-strength-bar>
          </div>

          <div class="form-group">
            <label for="confirmPassword">{{'global.form.confirmpassword'|translate | compareText:'New password confirmation'}}</label>
            <input type="password" id="confirmPassword" class="form-control" style="border-color: #f26c4f;" formControlName="confirmPassword" placeholder="{{'global.form.confirmpassword.placeholder' | translate}}">
            <div *ngIf="passwordForm.errors?.['mismatch'] && passwordForm.get('confirmPassword')?.touched">
              <div class="help-block">
                {{'global.messages.validate.confirmpassword.required' |translate | compareText:'The password confirmation does not match.'}}
              </div>
            </div>
          </div>

          <div class="form-group">
            <button type="submit" class="btn btn-primary">{{'password.form.button' |translate | compareText:'Save'}}</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
